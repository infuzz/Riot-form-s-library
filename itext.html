<itext>
    <jlabel field={props.field}></jlabel>
    <jtooltip tip={props.field.tip}></jtooltip>
    <template if={props.field.multilang} each={lang in props.attr.langs}>
        <button type="button" class="btn {btnLangColor(lang)} btn-sm ml-1" style="text-transform: capitalize;" idLang={lang} onclick={selectLang}>{langName(lang)} <span class="inputFeedback"></span></button>
    </template>
    
    <div each={lang in state.langs} class="input-group {lang==state.currentLang || !lang?'':'hide'}">
        <jaddon field={props.field} placement='left'></jaddon>
        <input if={props.field.type!='textarea'} { ...props.field } type={state.type} class="form-control {props.field.class}" name={buildId(lang)} placeholder="text" size={props.field.size} value={defaultValue()} id={} onkeyup={change}>
        
        <textarea  if={props.field.type=='textarea'} { ...props.field } class="form-control {props.field.class}" rows={props.field.rows} name={buildId(lang)} id={}>{defaultValue()}</textarea>
        
        <jaddon field={props.field} placement='right'></jaddon>
    </div>
    <jhelp help={props.field.help}></jhelp>


	<script>
		export default {
			onBeforeMount() {
				this.state.currentLang = this.props.attr.langs[0]
				if (this.props.field.multilang) {
					this.state.langs = this.props.attr.langs
				} else {
					this.state.langs = ['']
				}
                if(this.props.type=='datetime') this.state.type='datetime-local'
                else this.state.type=this.props.field.type
			},
			btnLangColor(lang) {
				return lang == this.state.currentLang ? 'btn-primary' : 'btn-danger'
			},
			buildId(lang) {
				return this.props.field.multilang ? this.props.field.id + '.' + lang : this.props.field.id
			},
            defaultValue() {
               if(this.state.currentLang == this.props.attr.langs[0]) return this.props.field.value
			},            
			selectLang(ev) {
				this.state.currentLang = ev.target.attributes.idLang.value
				this.update()
			},
            change(ev){
               console.log(ev.target.validity.valid)
            }
		}
	</script>
</itext>
